<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Document</title>
</head>
<body>
<script type="text/javascript">
     var request = function(url,options){
        options.type = options.type||'get';
        options.callback = options.callback||function(){};
        options.dataType =  options.dataType||'text';

        var xhr = new XMLHttpRequest();

        xhr.open(options.type,url,true);

        xhr.onload = function(){

            switch(options.dataType){
                case "text":options.callback( xhr.responseText );
                break;
                case "json":options.callback( JSON.parse(xhr.responseText) );
                case 'xml':options.callback( xhr.responseXml );

            }

        };

        if(options.type == 'post'){
           //设置请求头信息，如果用post进行请求必须设置。
            xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded');
            xhr.send(options.data);
        }else{
            xhr.send();
        }

     };
</script>
</body>
</html>